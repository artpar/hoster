# Hoster Production Environment Configuration
# Copy this file to /etc/hoster/.env and configure for your environment

# =============================================================================
# Server Configuration
# =============================================================================

# HTTP server port for the API
HOSTER_SERVER_PORT=8080

# Data directory for SQLite database
HOSTER_DATA_DIR=/var/lib/hoster

# Graceful shutdown timeout (seconds)
HOSTER_SHUTDOWN_TIMEOUT=30

# =============================================================================
# APIGate Integration
# =============================================================================

# Enable APIGate integration
HOSTER_APIGATE_ENABLED=true

# APIGate base URL
HOSTER_APIGATE_URL=http://localhost:8082

# API key for admin operations (auto-registration)
HOSTER_APIGATE_ADMIN_KEY=ak_your_admin_key_here

# Auto-register routes with APIGate on startup
HOSTER_APIGATE_AUTO_REGISTER=true

# =============================================================================
# Billing Integration
# =============================================================================

# Enable billing/metering
HOSTER_BILLING_ENABLED=true

# APIGate URL for billing (defaults to HOSTER_APIGATE_URL)
HOSTER_BILLING_APIGATE_URL=http://localhost:8082

# API key for billing operations
HOSTER_BILLING_API_KEY=ak_your_billing_key_here

# Billing report interval (default: 60s)
HOSTER_BILLING_REPORT_INTERVAL=60s

# =============================================================================
# App Proxy Configuration
# =============================================================================

# Enable the built-in app proxy
HOSTER_APP_PROXY_ENABLED=true

# App proxy listen address
HOSTER_APP_PROXY_ADDRESS=0.0.0.0:9091

# Base domain for deployed apps (e.g., apps.example.com)
# Apps will be accessible at: {deployment-name}.{base_domain}
HOSTER_APP_PROXY_BASE_DOMAIN=apps.example.com

# Proxy timeouts
HOSTER_APP_PROXY_READ_TIMEOUT=30s
HOSTER_APP_PROXY_WRITE_TIMEOUT=30s

# =============================================================================
# Worker Nodes (Optional - for distributed deployments)
# =============================================================================

# Encryption key for SSH keys and cloud credentials (exactly 32 bytes)
# If set, remote node features (NodePool, HealthChecker, Provisioner) are enabled.
# Generate with: openssl rand 32 | xxd -p -c 32
HOSTER_NODES_ENCRYPTION_KEY=

# Health check interval
HOSTER_NODES_HEALTH_CHECK_INTERVAL=60s

# =============================================================================
# Logging
# =============================================================================

# Log level: debug, info, warn, error
HOSTER_LOG_LEVEL=info

# Log format: json, text
HOSTER_LOG_FORMAT=json

# =============================================================================
# APIGate Configuration (separate service)
# =============================================================================

# Database path
APIGATE_DATABASE_DSN=/var/lib/apigate/apigate.db

# Server port
APIGATE_SERVER_PORT=8082

# Stripe configuration (for payments)
# APIGATE_STRIPE_SECRET_KEY=sk_live_...
# APIGATE_STRIPE_WEBHOOK_SECRET=whsec_...

# JWT secret for sessions
# APIGATE_JWT_SECRET=your_jwt_secret_here
